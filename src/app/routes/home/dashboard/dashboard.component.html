<div class="dashboard_container p-4">
  <div class="mb-4 p-4 w-50">
    <!-- <nz-ribbon nzText="New" nzColor="red">
      <div class="new_promotion p-4">
        <div class="text-center"><b>Tăng trưởng bứt phá cùng các dịch vụ hỗ trợ của ASMLink. <a>Xem ngay tại đây!</a></b></div>
        <div class="mt-2 flex justify-around">
          <button nz-button nzType="dashed">Tài khoản invoice</button>
          <button nz-button nzType="dashed">Chứng minh traffic</button>
          <button nz-button nzType="dashed">Dịch vụ OTC</button>
        </div>
      </div>
    </nz-ribbon> -->
    <nz-alert
      nzShowIcon
      nzType="success"
      [nzMessage]="promotionTitle"
      [nzDescription]="descriptionTemplate2"
      [nzAction]="actionTemplate4"
    ></nz-alert>
    <ng-template #promotionTitle>
      <b
        >Tăng trưởng bứt phá cùng các dịch vụ hỗ trợ của ASMLink!</b
      ></ng-template
    >
    <ng-template #descriptionTemplate2>
      <p>
        ASMLink luôn hỗ trợ và đồng hành cùng anh/chị trên cả chặng đường.
        Anh/Chị có thể khám phá ngay các dịch vụ bổ sung của ASMLink:
      </p>
      <div class="mt-2">
        <button
          class="mr-2"
          nz-button
          nzType="dashed"
          (click)="redirect('/home/invoice-store')"
        >
          Tài khoản invoice
        </button>
        <button
          class="mr-2"
          nz-button
          nzType="dashed"
          (click)="redirect('/home/traffic-proof')"
        >
          Chứng minh traffic
        </button>
        <button
          class="mr-2"
          nz-button
          nzType="dashed"
          (click)="redirect('/home/otc-services')"
        >
          Dịch vụ OTC
        </button>
      </div>
    </ng-template>
    <ng-template #actionTemplate4>
      <nz-space nzDirection="vertical">
        <button
          *nzSpaceItem
          nz-button
          nzType="primary"
          (click)="redirect('/home/invoice-store')"
        >
          Khám phá ngay
        </button>
      </nz-space>
    </ng-template>
  </div>
  <div nz-row [nzGutter]="16" class="data_block_list flex">
    <div nz-col nzSpan="4">
      <div class="data_block flex items-center px-4 py-2 mx-1">
        <div class="block_icon rounded-[5px] bg-[#01B8FF] text-white mr-2 p-2">
          <i class="fas fa-money-bill-wave"></i>
        </div>
        <div class="block_content">
          <div class="block_statistic font-bold">
            {{ userTotalCost | number }} đ
          </div>
          <div class="block_description">Chi phí</div>
        </div>
      </div>
    </div>
    <div nz-col nzSpan="4">
      <div class="data_block flex items-center px-4 py-2 mx-1">
        <div class="block_icon rounded-[5px] bg-[#7673E6] text-white mr-2 p-2">
          <i class="fas fa-hand-point-up"></i>
        </div>
        <div class="block_content">
          <div class="block_statistic font-bold">
            {{ userTotalClick | number }}
          </div>
          <div class="block_description">Lượt click</div>
        </div>
      </div>
    </div>
    <div nz-col nzSpan="4">
      <div class="data_block flex items-center px-4 py-2 mx-1">
        <div class="block_icon rounded-[5px] bg-[#F47B25] text-white mr-2 p-2">
          <i class="fas fa-link"></i>
        </div>
        <div class="block_content">
          <div class="block_statistic font-bold">
            {{ refCount | number }}
          </div>
          <div class="block_description">Refs</div>
        </div>
      </div>
    </div>
    <div nz-col nzSpan="4">
      <div class="data_block flex items-center px-4 py-2 mx-1">
        <div class="block_icon rounded-[5px] bg-[#808000] text-white mr-2 p-2">
          <i class="fab fa-buffer"></i>
        </div>
        <div class="block_content">
          <div class="block_statistic font-bold">
            {{ projectCount | number }}
          </div>
          <div class="block_description">Dự Án</div>
        </div>
      </div>
    </div>
    <div nz-col nzSpan="4">
      <div class="data_block flex items-center px-4 py-2 mx-1">
        <div class="block_icon rounded-[5px] bg-[#FF473D] text-white mr-2 p-2">
          <i class="fas fa-window-restore"></i>
        </div>
        <div class="block_content">
          <div class="block_statistic font-bold">
            {{ campaignCount | number }}
          </div>
          <div class="block_description">Chiến dịch</div>
        </div>
      </div>
    </div>
  </div>
  <div class="campaign_table m-4">
    <div class="action_btns pb-3">
      <div nz-row nzGutter="16">
        <div nz-col [nzSpan]="6">
          <nz-input-group [nzSuffix]="suffixIconSearch">
            <input type="text" nz-input placeholder="Tìm kiếm id chiến dịch, tên chiến dịch..." [ngModel]="searchCampaignValue" (ngModelChange)="onSearchCampaign($event)"/>
          </nz-input-group>
          <ng-template #suffixIconSearch>
            <span nz-icon nzType="search"></span>
          </ng-template>
        </div>
        <div nz-col [nzSpan]="18" class="flex justify-end">
          <button nz-button nzType="default" (click)="loadData()">
            <i class="fas fa-redo-alt"></i>
          </button>
        </div>
      </div>
    </div>
    <nz-table
      #campaignListTable
      [nzData]="listViewCampaign"
      [nzScroll]="{ y: 'calc(100vh - 260px)' }"
    >
      <thead>
        <tr>
          <th>Mã chiến dịch</th>
          <th>Tên chiến dịch</th>
          <th>Tên dự án</th>
          <th>Tổng số click hệ thống đo được</th>
          <th>Tổng số click từ ads</th>
          <th>Tổng chi phí từ ads</th>
          <th>Thống kê</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of campaignListTable.data">
          <!-- <td>{{ data?.id }}</td>
          <td>{{ data?.name }}</td>
          <td>{{ data?.project_name }}</td>
          <td>{{ data?.number_of_clicks }}</td>
          <td>{{ data?.number_of_clicks_real }}</td>
          <td>{{ data?.adsCost | number }} đ</td> -->
          <td>{{ data?.campaignId }}</td>
          <td>{{ data?.campaignName }}</td>
          <td>{{ data?.project_name }}</td>
          <td>{{ data?.systemClicks | number }}</td>
          <td>{{ data?.adsClicks | number }}</td>
          <td>{{ data?.adsCosts | number }} đ</td>
          <!-- <td>
            <div class="script_box relative">
              <div class="absolute top-[4px] right-0">
                <button
                  nz-button
                  nzType="default"
                  nzShape="circle"
                  (click)="copyToClipboard(data?.script!)"
                >
                  <i class="fas fa-copy"></i>
                </button>
              </div>
              {{ data?.script }}
            </div>
          </td> -->
          <td>
            <button
              nz-button
              nz-tooltip
              nzTooltipTitle="Xem thống kê click"
              nzType="default"
              nzShape="circle"
              class="mr-2"
              (click)="onClickViewCampaignStatistic(data)"
            >
              <i class="fas fa-chart-line"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
  <div class="data_block mx-4 my-4">
    <!-- <canvas
      baseChart
      class="w-full p-12"
      [type]="'line'"
      [data]="lineChartData"
      [options]="lineChartOptions"
      [legend]="lineChartLegend"
    >
    </canvas> -->
    <canvas
      baseChart
      class="w-full p-12"
      [type]="'bar'"
      [data]="barChartData"
      [options]="barChartOptions"
      [legend]="barChartLegend"
    >
    </canvas>
  </div>
</div>
<app-campaign-click-statistics-modal
  #campaignClickStatisticsModal
></app-campaign-click-statistics-modal>
