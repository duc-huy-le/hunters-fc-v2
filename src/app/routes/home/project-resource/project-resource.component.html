<div class="projectresource_container p-4">
  <div class="action_btns pb-3">
  <div nz-row nzGutter="16">  
  <div nz-col [nzSpan]="6">
  <nz-input-group [nzSuffix]="suffixIconSearch">
    <input type="text" nz-input placeholder="Tìm kiếm tên chiến dịch..." [(ngModel)]="searchText"  name="search">
  </nz-input-group>
  <ng-template #suffixIconSearch>
    <span nz-icon nzType="search"></span>
  </ng-template>
  </div>
  <div nz-col [nzSpan]="18" class="flex justify-end">
  <button nz-button nzType="primary" class="mr-2" (click)="showModal()">
   <i class="fas mr-2"><span nz-icon nzType="setting" nzTheme="outline"></span></i>Tùy chỉnh cột
  </button>
  <button nz-button nzType="default" (click)="reloadData()">
    <i class="fas fa-redo-alt"></i>
  </button> 
   </div>
  </div>
  </div>

  <nz-table #basicTable [nzLoading]="loadingTable" [nzScroll]="{ y: 'calc(100vh - 300px)' }" [nzData]="listOfData|search:searchText" [nzCustomColumn]="customColumn">
    <thead>
      <tr>
        <th *ngFor="let column of displayedColumns" nzCellControl="{{ column.key }}">
          {{ column.name }}
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of basicTable.data">
        <td *ngFor="let column of displayedColumns"  nzCellControl="{{ column.key }}">
          {{ data[column.key] }}
        </td>
      </tr>
    </tbody>
  </nz-table>

  <nz-modal [(nzVisible)]="isVisible" nzTitle="Custom Column" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
      <div nz-row [nzGutter]="24">
        <div nz-col class="gutter-row" [nzSpan]="12">
          <div class="example-container">
            <p>Hiển thị</p>
            <div
              cdkDropList
              #displayedList="cdkDropList"
              [cdkDropListData]="displayedColumns"
              [cdkDropListConnectedTo]="[hiddenList]"
              class="example-list"
              (cdkDropListDropped)="drop($event)">
              <div class="example-box" *ngFor="let item of displayedColumns; let i = index" cdkDrag>
                {{ item.name }}
                <span *ngIf="!item.required" nz-icon nzType="minus-circle" nzTheme="outline" (click)="deleteCustom(item, i)"></span>
              </div>
            </div>
            <div class="example-box" *ngFor="let item of footer">
              {{ item.name }}
            </div>
          </div>
        </div>
        <div nz-col class="gutter-row" [nzSpan]="12">
          <div class="example-container">
            <p>Không hiển thị</p>
            <div
              cdkDropList
              #hiddenList="cdkDropList"
              [cdkDropListData]="hiddenColumns"
              [cdkDropListConnectedTo]="[displayedList]"
              class="example-list"
              (cdkDropListDropped)="drop($event)"
            >
              <div class="example-box" *ngFor="let item of hiddenColumns; let i = index" cdkDrag>
                {{ item.name }}
                <span nz-icon nzType="plus-circle" nzTheme="outline" (click)="addCustom(item, i)"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </nz-modal>
</div>

